<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Datepicker for Bootstrap</title>
    <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
    <link id="bs-css" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
    <link id="bsdp-css" href="bootstrap-datepicker/css/datepicker3.css" rel="stylesheet">
    <script>
      var page = {bootstrap:3};
      function swap_bs(){
        var bscss = $('#bs-css'),
            bsdpcss = $('#bsdp-css');
        if (page.bootstrap == 3){
          bscss.prop('href', 'http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css');
          bsdpcss.prop('href', 'bootstrap-datepicker/css/datepicker.css');
          page.bootstrap = 2;
          $(page).trigger('change:bootstrap', 2)
        }
        else{
          bscss.prop('href', 'http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css');
          bsdpcss.prop('href', 'bootstrap-datepicker/css/datepicker3.css');
          page.bootstrap = 3;
          $(page).trigger('change:bootstrap', 3)
        }
      }
    </script>
    <link href="google-code-prettify/prettify.css" rel="stylesheet">
    <script src="google-code-prettify/prettify.min.js"></script>

    <script src="bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.ar.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.az.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.bg.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.ca.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.cs.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.cy.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.da.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.de.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.el.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.es.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.et.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.fa.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.fi.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.fr.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.gl.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.he.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.hr.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.hu.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.id.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.is.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.it.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.ja.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.ka.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.kk.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.kr.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.lt.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.lv.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.mk.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.ms.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.nb.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.nl.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.nl-BE.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.no.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.pl.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.pt-BR.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.pt.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.ro.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.rs.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.rs-latin.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.ru.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.sk.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.sl.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.sq.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.sv.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.sw.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.th.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.tr.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.ua.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.vi.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.zh-CN.js" charset="UTF-8"></script>
    <script src="bootstrap-datepicker/js/locales/bootstrap-datepicker.zh-TW.js" charset="UTF-8"></script>

  </head>

  <body>

    <div class="container">

      <nav class="navbar navbar-inverse" role="navigation">
        <div class="container-fluid">
          <div class="navbar-header">
            <a class="navbar-brand" href="https://vizjerai.github.io/bootstrap-datepicker">bootstrap-datepicker</a>
          </div>

          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Sandbox</a></li>
            <li><a href="https://github.com/vizjerai/bootstrap-datepicker" taget="_blank">GitHub</a></li>
          </ul>
        </div>
      </nav>

      <div class="page-header">
        <h1>bootstrap-datepicker sandbox <small>&alpha;lph&alpha;</small></h1>
      </div>

      <p>Use the form below to tweak the options; results and code appear in realtime below.</p>
      <p>As you change options, your address bar will update to reflect the current configuration (requires a browser with <code>history.replaceState</code> support).  This url can be used to link to the sandbox with the given configuration pre-loaded.</p>
      <p>
        <a id="download-release" href="https://github.com/vizjerai/bootstrap-datepicker/archive/1.3.0-12.zip" class="btn btn-default">Download 1.3.0-12</a>
        <a id="download-master" href="https://github.com/vizjerai/bootstrap-datepicker/archive/master.zip" class="btn btn-default">Download Development</a>
      </p>
      <form class="sandbox-form form-horizontal" id="sandbox">
        <div class="well">

          <div class="row">
            <div class="col-md-12">
              <label class="control-label">Type:</label>
            </div>
          </div>

          <label for="markup-text" class="radio-inline">
            <input name="markup" id="markup-text" value="input" type="radio" checked>
            Text input
            <script type="text/html" class="html" data-version="2">
              <input type="text" type="text">
            </script>
            <script type="text/html" class="html" data-version="3">
              <input type="text" type="text" class="form-control">
            </script>
            <script type="text/plain" class="selector" data-version="*">
              input
            </script>
          </label>
          <label for="markup-component" class="radio-inline">
            <input name="markup" id="markup-component" value="component" type="radio">
            Component
            <script type="text/html" class="html" data-version="2">
              <div class="input-append date">
                <input type="text" class="span2"><span class="add-on"><i class="icon-th"></i></span>
              </div>
            </script>
            <script type="text/html" class="html" data-version="3">
              <div class="input-group date">
                <input type="text" class="form-control"><span class="input-group-addon"><i class="glyphicon glyphicon-th"></i></span>
              </div>
            </script>
            <script type="text/plain" class="selector" data-version="2">
              .input-append.date
            </script>
            <script type="text/plain" class="selector" data-version="3">
              .input-group.date
            </script>
          </label>
          <label for="markup-inline" class="radio-inline">
            <input name="markup" id="markup-inline" value="embedded" type="radio">
            Embedded / inline
            <script type="text/html" class="html" data-version="*">
              <div></div>
            </script>
            <script type="text/plain" class="selector" data-version="*">
              div
            </script>
          </label>
          <label for="markup-range" class="radio-inline">
            <input name="markup" id="markup-range" value="range" type="radio">
            Range
            <script type="text/html" class="html" data-version="2">
              <div class="input-daterange" id="datepicker">
                  <input type="text" class="input-small" name="start" />
                  <span class="add-on">to</span>
                  <input type="text" class="input-small" name="end" />
              </div>
            </script>
            <script type="text/html" class="html" data-version="3">
              <div class="input-daterange input-group" id="datepicker">
                  <input type="text" class="input-sm form-control" name="start" />
                  <span class="input-group-addon">to</span>
                  <input type="text" class="input-sm form-control" name="end" />
              </div>
            </script>
            <script type="text/plain" class="selector" data-version="*">
              .input-daterange
            </script>
          </label>

          <p></p>
          <p>Options:</p>
          <div class="row">
            <div class="col-md-3">
              <label for="format" class="control-label">Format</label>
              <input class="form-control" id="format" name="format" type="text" placeholder="mm/dd/yyyy">
            </div>
            <div class="col-md-3">
              <label for="weekStart" class="control-label">Week start</label>
              <input class="form-control" id="weekStart" name="weekStart" type="text" placeholder="0">
            </div>
            <div class="col-md-3">
              <label for="startDate" class="control-label">Start date</label>
              <input class="form-control" id="startDate" name="startDate" type="text" placeholder="-Infinity">
            </div>
            <div class="col-md-3">
              <label for="endDate" class="control-label">End date</label>
              <input class="form-control" id="endDate" name="endDate" type="text" placeholder="+Infinity">
            </div>

            <div class="col-md-3">
              <label for="startView" class="control-label">Start view</label>
              <select class="form-control" id="startView" name="startView">
                <option value="0">0 / month</option>
                <option value="1">1 / year</option>
                <option value="2">2 / decade</option>
              </select>
            </div>
            <div class="col-md-3">
              <label for="minViewMode" class="control-label">Min view mode</label>
              <select class="form-control" id="minViewMode" name="minViewMode">
                <option value="0">0 / days</option>
                <option value="1">1 / months</option>
                <option value="2">2 / years</option>
              </select>
            </div>
          </div>

          <div class="row">
            <div class="col-md-3">
              <label for="todayBtn" class="control-label">Today button</label>
              <select class="form-control" id="todayBtn" name="todayBtn">
                <option value="false">disabled</option>
                <option value="true">enabled (unlinked)</option>
                <option value="linked">linked</option>
              </select>
            </div>
            <div class="col-md-3">
              <label for="language" class="control-label">Language</label>
              <select class="form-control" id="language" name="language">
                <option value="en">en</option>
              </select>
              <script>
                $(function(){
                  for (var lang in $.fn.datepicker.dates) {
                    if (!$('#language option[value='+lang+']').length)
                      $('<option value="'+lang+'">'+lang+'</option>').appendTo('#language')
                  }
                });
              </script>
            </div>

            <div class="col-md-3">
              <label for="orientation" class="control-label">Orientation</label>
              <select class="form-control" id="orientation" name="orientation">
                <option value="auto">auto</option>
                <option value="top auto">top auto</option>
                <option value="bottom auto">bottom auto</option>
                <option value="auto left">auto left</option>
                <option value="top left">top left</option>
                <option value="bottom left">bottom left</option>
                <option value="auto right">auto right</option>
                <option value="top right">top right</option>
                <option value="bottom right">bottom right</option>
              </select>
            </div>
          </div>

          <div class="row">
            <div class="col-md-3">
              <label for="multidate" class="control-label">Multidate</label>
              <input type="text" class="form-control" id="multidate" name="multidate" placeholder="false" title="false, true, or a number">
            </div>
            <div class="col-md-3">
              <label for="multidateSeparator" class="control-label">Multidate separator</label>
              <input type="text" class="form-control" id="multidateSeparator" name="multidateSeparator" placeholder=",">
            </div>
          </div>

          <div class="row">
            <div class="col-md-12">
              <label class="control-label">Days of week disabled:</label>
            </div>
            <div class="col-md-12">
              <label class="checkbox-inline"><input type="checkbox" name="daysOfWeekDisabled" value="0"> 0</label>
              <label class="checkbox-inline"><input type="checkbox" name="daysOfWeekDisabled" value="1"> 1</label>
              <label class="checkbox-inline"><input type="checkbox" name="daysOfWeekDisabled" value="2"> 2</label>
              <label class="checkbox-inline"><input type="checkbox" name="daysOfWeekDisabled" value="3"> 3</label>
              <label class="checkbox-inline"><input type="checkbox" name="daysOfWeekDisabled" value="4"> 4</label>
              <label class="checkbox-inline"><input type="checkbox" name="daysOfWeekDisabled" value="5"> 5</label>
              <label class="checkbox-inline"><input type="checkbox" name="daysOfWeekDisabled" value="6"> 6</label>
            </div>
          </div>

          <div class="row">
            <div class="col-md-12">
              <label class="control-label">Additional Options:</label>
            </div>
            <div class="col-md-12">
              <label for="calendarWeeks" class="checkbox-inline">
                <input id="calendarWeeks" name="calendarWeeks" type="checkbox">
                Calendar weeks
              </label>
              <label for="autoclose" class="checkbox-inline">
                <input id="autoclose" name="autoclose" type="checkbox">
                Autoclose
              </label>
              <label for="todayHighlight" class="checkbox-inline">
                <input id="todayHighlight" name="todayHighlight" type="checkbox">
                Today highlight
              </label>
              <label for="keyboardNavigation" class="checkbox-inline">
                <input id="keyboardNavigation" name="keyboardNavigation" type="checkbox" checked>
                Keyboard navigation
              </label>
              <label for="forceParse" class="checkbox-inline">
                <input id="forceParse" name="forceParse" type="checkbox" checked>
                Force parse
              </label>
              <label for="beforeShowDay" class="checkbox-inline">
                <input id="beforeShowDay" name="beforeShowDay" type="checkbox">
                Before-show-day callback
              </label>
            </div>
          </div>

          <br>

          <div class="row">
            <div class="col-md-12">
              <button class="btn btn-warning" type="button" id="ch_bs"></button>
              <button class="btn btn-danger" type="reset">Reset to defaults</button>
            </div>
          </div>
        </div>
      </form>

      <div class="row form-horizontal">
        <div class="span5 col-md-5" id="sandbox-container"></div>
        <div class="span7 col-md-7">
          <pre class="prettyprint linenums" id="sandbox-html"></pre>
          <pre class="prettyprint linenums" id="sandbox-js"></pre>
        </div>
      </div>
    </div>

    <script>
      $(function(){
        var defaults = {},
            defaults_form = $('<form>', {html: $('.sandbox-form').html()})
        $.each(defaults_form.serializeArray(), function(i,e){
          if (e.name in defaults)
            defaults[e.name] += ',' + e.value;
          else
            defaults[e.name] = e.value;
        });
        delete defaults.markup;

        function fix_indent(s){
          var lines = s.split(/\r?\n/g);
          while (/^\s*$/.test(lines[0])) lines.shift();
          while (/^\s*$/.test(lines[lines.length-1])) lines.pop();
          var indent = /^\s*/.exec(lines[0])[0],
              deindent = new RegExp('^' + indent);
          for (var i=0; i<lines.length; i++)
            lines[i] = lines[i].replace(deindent, '');
          return lines.join('\n');
        }

        function build_code(){
          var form = $('.sandbox-form'),
              values = {};
          $.each(form.serializeArray(), function(i,e){
            if (e.name in values)
              values[e.name] += ',' + e.value;
            else
              values[e.name] = e.value;
          });

          var html_el = $('[name=markup][value='+values.markup+']').siblings('script.html').filter('[data-version="' + page.bootstrap + '"], [data-version="*"]');
          var html = fix_indent(html_el.html());
          var selector_el = $('[name=markup][value='+values.markup+']').siblings('script.selector').filter('[data-version="' + page.bootstrap + '"], [data-version="*"]');
          var selector = selector_el.html().replace(/^\s+|\s+$/g, '');
          delete values.markup;

          var js = "$('#sandbox-container "+selector+"').datepicker({\n",
              val;
          for (var opt in $.extend({}, defaults, values)){
            if (values[opt] != defaults[opt]){
              val = values[opt];
              if (opt == 'daysOfWeekDisabled') val = '"'+val+'"'
              else if (opt == 'beforeShowDay') val = function(date){
    if (date.getMonth() == (new Date()).getMonth())
      switch (date.getDate()){
        case 4:
          return {
            tooltip: 'Example tooltip',
            classes: 'active'
          };
        case 8:
          return false;
        case 12:
          return "green";
      }
  }
              else if (val == 'on' || val == 'true') val = 'true';
              else if (val === void 0 || val == 'false') val = 'false';
              else if (parseInt(val) == val) val = val;
              else val = '"'+val+'"'
              js += "    " + opt + ": " + val + ",\n"
            }
          }
          if (js.slice(-2) == ",\n")
            js = js.slice(0,-2) + "\n";
          js += "});";

          return [html, js];
        }
        function update_code(){
          var code = build_code(),
              html = code[0],
              js = code[1];

          var print_html = html.replace(/</g, '&lt;').replace(/>/g, '&gt;')
          $('#sandbox-html').html(prettyPrintOne(print_html, 'html', true));
          $('#sandbox-js').html(prettyPrintOne(js, 'js', true));
        }
        function update_sandbox(){
          var code = build_code(),
              html = code[0],
              js = code[1];

          $('#sandbox-container > :first-child').datepicker('remove');
          $('#sandbox-container').html(html);
          eval(js);
        }
        function update_url(){
          if (history.replaceState){
            var query = '?' + $('.sandbox-form').serialize();
            history.replaceState(null, null, query + '#sandbox');
          }
        }
        function update_all(){
          update_code();
          update_sandbox();
          update_url();
        }

        $('.sandbox-form')
          .submit(function(){ return false; })
          .keydown(update_all)
          .keyup(update_all)
          .click(function(e){
            update_code();
            update_sandbox();
            if (!$(e.target).is('button[type=reset]'))
              update_url();
          });

        $('.sandbox-form button[type=reset]').click(function(){
          $('.sandbox-form')[0].reset();
          update_code();
          update_sandbox();
          history.replaceState && history.replaceState(null, null, '?#sandbox');
        });

        $(page).on('change:bootstrap', function(e, version){
          $('#ch_bs').text('Switch to Bootstrap ' + (5-version));
        });
        $('#ch_bs').click(function(){
          swap_bs();
        });

        $(page).on('change:bootstrap', update_all);

        setTimeout(function(){
          // Load form state from url if possible
          var search = document.location.search.replace(/^\?/, '');
          if (search){
            search = search.split('&');
            var values = {};
            for (var i=0, opt, val; i<search.length; i++){
              opt = search[i].split('=')[0];
              val = search[i].split('=')[1];
              if (opt in values)
                values[opt] += ',' + val;
              else
                values[opt] = val;
            }

            for (var opt in $.extend({}, defaults, values)){
              var el = $('[name='+opt+']'),
                  val = unescape(values[opt]);
              if (el.is(':checkbox')){
                if (el.length > 1){
                  var vals = val.split(',');
                  $('[name='+opt+']').prop('checked', false);
                  for (var i=0; i<vals.length; i++)
                    $('[name='+opt+'][value='+vals[i]+']').prop('checked', true);
                }
                else if (val === 'undefined')
                  el.prop('checked', false);
                else
                  el.prop('checked', true);
              }
              else if (el.is(':radio')){
                el.filter('[value='+val+']').prop('checked', true);
              }
              else
                el.val(val);
            }
          }

          // Don't replaceState the url on pageload
          update_code();
          update_sandbox();
        }, 300);

        // Analytics event tracking
        // What options are people interested in?
        $('.sandbox-form input, .sandbox-form select').change(function(e){
          var $this = $(this),
              val, opt;
          opt = $this.attr('name');
          val = $this.val();
          if ($this.is(':checkbox') && val == 'on')
            val = $this.is(':checked') ? "on" : "off";
          _gaq.push(['_trackEvent', 'Sandbox', 'Option: ' + opt, val]);
        });
        // Do they even use the reset button?
        $('.sandbox-form button[type=reset]').click(function(){
          _gaq.push(['_trackEvent', 'Sandbox', 'Reset']);
        });

        var flag=0, mousedown=false, delta=0, x=0, y=0, dx, dy;
        // How do they interact with the HTML display?  Do they select
        // the code, do they try to edit it (I'd want to!)?
        $("#sandbox-html").mousedown(function(e){
          mousedown = true;
          delta = 0; x=e.clientX; y=e.clientY;
        });
        $("#sandbox-html").mousemove(function(e){
          if (mousedown){
            dx = Math.abs(e.clientX-x);
            dy = Math.abs(e.clientY-y);
            delta = Math.max(dx, dy);
          }
        });
        $("#sandbox-html").mouseup(function(){
          if(delta <= 10)
            _gaq.push(['_trackEvent', 'Sandbox', 'HTML Clicked']);
          else
            _gaq.push(['_trackEvent', 'Sandbox', 'HTML Selected']);
          delta = 0;
          mousedown = false;
        });

        // How do they interact with the JS display?  Do they select
        // the code, do they try to edit it (I'd want to!)?
        $("#sandbox-js").mousedown(function(e){
          mousedown = true;
          delta = 0; x=e.clientX; y=e.clientY;
        });
        $("#sandbox-js").mousemove(function(e){
          if (mousedown){
            dx = Math.abs(e.clientX-x);
            dy = Math.abs(e.clientY-y);
            delta = Math.max(dx, dy);
          }
        });
        $("#sandbox-js").mouseup(function(){
          if(delta <= 10)
            _gaq.push(['_trackEvent', 'Sandbox', 'JS Clicked']);
          else
            _gaq.push(['_trackEvent', 'Sandbox', 'JS Selected']);
          delta = 0;
          mousedown = false;
        });


        $(page).trigger('change:bootstrap', page.bootstrap)
      });

      var _gaq = _gaq || [];
    </script>
  </body>
</html>
